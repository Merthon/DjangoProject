{% extends 'base.html' %}
{% block title %}å•†å“åˆ—è¡¨{% endblock %}
{% block content %}
    <section class="search-bar">
        <form method="get" action="{% url 'products:search' %}">
            <input type="text" name="q" placeholder="æœç´¢å•†å“..." value="{{ query|default:'' }}">
            <button type="submit" class="search-btn">ğŸ”</button>
        </form>
        {% if query %}<p class="search-info">æœç´¢ç»“æœ: {{ query }}</p>{% endif %}
        {% if recommend %}<p class="search-info">ä¸ºä½ æ¨è</p>{% endif %}
    </section>
    <section class="product-grid">
        {% for product in products %}
            <div class="product-card">
                <img src="{{ product.image.url|default:'/static/images/default.jpg' }}" alt="{{ product.name }}" class="product-img">
                <div class="product-info">
                    <h3>{{ product.name }}</h3>
                    <p class="price">Â¥{{ product.price }}</p>
                    <p class="description">{{ product.description|truncatewords:10 }}</p>
                    <div class="product-actions">
                        <a href="{% url 'products:product_detail' product.id %}" class="btn">æŸ¥çœ‹è¯¦æƒ…</a>
                        <a href="{% url 'orders:add_to_cart' product.id %}" class="btn btn-cart">åŠ å…¥è´­ç‰©è½¦</a>
                    </div>
                </div>
            </div>
        {% empty %}
            <p class="no-products">å•¥å•†å“éƒ½æ²¡æœ‰ï¼</p>
        {% endfor %}
    </section>
{% endblock %}